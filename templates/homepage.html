{% extends 'base.html' %}

{% block head %}

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

{% endblock %}


{% block content %}
<div class='container ml-4 mt-4'>
  <p>Hello-- Please create a goal</p>
  <form id='adduser-form'>
          
    <div class='form-group row'>      
      <label for='username'>Username </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='username' type='text' name='name' placeholder='ex: jdoe' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='name'>Name </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='name' type='text' name='name' placeholder='ex: Jane Doe' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='email'>Email </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='email' type='text' name='email' placeholder='ex: jane@doe.doe' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='password'>Password </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='password' type='password' name='password' placeholder='ex: ********' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='goal'>Goal </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='goal' type='text' name='goal' placeholder='ex: Swim in the deep end.' required>
      </div>
    </div>

    <div class='form-group row'>  
      <label for='goal-completion'>When do you want to complete this goal by? </label> 
      <div class='col'>
        <input class='form-control form-control-sm' id='goal-completion' type='date' name='goal-completion' required>
      </div>
    </div>

    <div class='mt-3 form-group row'>
      <input type='submit' value='Save!' class='btn btn-outline'>
    </div>

  </form><br>
</div>


<script>
  
  $("#adduser-form").submit((event) => {
    // JQuery event listener for click on submit of form

    event.preventDefault();

    const formData = $("#adduser-form").serialize()
    // Store all input from form fields in a string 

    $.get('/add-user', formData, (data) => {
    // Ajax call to write to db, using formData (form field info)
    console.log("user added into db", data)
    //TODO - figure out what the callback needs to do here
    });
  });


</script>

{% endblock %}