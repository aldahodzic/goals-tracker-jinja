{% extends 'base.html' %}

{% block head %}

<style>
</style>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

{% endblock %}


{% block content %}
<div class='container ml-4 mt-4'>
  <h3>Welcome!</h3> 
  <h5>Please enter your account info and write a new goal.</h5>
  <p>For those new to Goal Tracker, you can create your account while making your first goal below.</p>
  <form id='adduser-form' class='ml-3'>
          
    <div class='form-group row'>      
      <label for='username'>Username </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='username' type='text' name='username' placeholder='ex: jdoe' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='password'>Password </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='password' type='password' name='password' placeholder='ex: ********' required>
      </div>
    </div>

    <div class='form-group row'>      
      <label for='goal'>Goal </label>
      <div class='col'>
        <input class='form-control form-control-sm' id='goal' type='text' name='goal' placeholder='ex: Swim in the deep end.' required>
      </div>
    </div>

    <div class='form-group row'>  
      <label for='goal-completion'>When do you want to complete this goal by? </label> 
      <div class='col'>
        <input class='form-control form-control-sm' id='goal-completion' type='date' name='goal-completion' required>
      </div>
    </div>

    <div class='mt-3 form-group row'>
      <input type='submit' value='Save!' class='btn btn-primary'>
    </div>

  </form><br>
</div>

<div id='results' class='container'>

</div>


<script>
  
  $("#adduser-form").submit((event) => {
    // JQuery event listener for click on submit of form

    event.preventDefault();

    const formData = $("#adduser-form").serialize();
    // Store all input from form fields in a string 

    $.get('/add-user', formData, (data) => {
    // Ajax call to write to db, using formData (form field info)
      $("#results").html(`<h4>${data}</h4>`);
      
      console.log("This happened: ", data);
    });
  });


</script>

{% endblock %}